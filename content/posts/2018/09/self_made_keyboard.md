+++
title = "自作キーボードを作ってみた：作成編"
author = ["derui"]
date = 2018-09-30T15:32:00+09:00
publishDate = 2018-09-30T00:00:00+09:00
lastmod = 2020-09-22T13:03:56+09:00
tags = ["自作キーボード"]
draft = false
+++

以前の記事で、キーボードを自作するために色々と注文していましたが、一通り届いたので、実際に作ってみました。

<!--more-->


## Irisのキットの内容 {#irisのキットの内容}

今回は、IrisのPCBとステンレスのplateを購入しました。広げるとこんな感じになります。

{{< figure src="/ox-hugo/self-made-keyboard-iris-kits.jpg" >}}

ステンレスが眩しいです。想定外だったのが、このステンレスプレートがめちゃくちゃ重かったことです。どのくらい重かったかと言うと、片手分のプレートだけで **Ergodox EZの片手分** くらいあります。

右上に見えているのは TRRS ケーブルです。あえてコイルしているのを購入してみましたが、このコイルが想定しているよりも硬かったため、しばらく伸ばしたりなんだりしています。


## Irisのビルド {#irisのビルド}

ビルドは、[公式のビルドログ](https://docs.keeb.io/iris-build-guide/#solder-switches) と、 [ASCII.jpの連載記事](http://ascii.jp/elem/000/001/613/1613057/) を参考にしました。公式のビルドログは、 ProMicroを取り付けたところで終わっているので、それ以降の（ケースとか）手順については、ASCII.jpの記事が参考になりました。

作成自体は、ひたすらはんだ付けしていくだけなので、ここからは写真を多めに出していきます。

まずはモゲ対策をしました。コレをやったおかげかどうかはわかりませんが、今回結構な頻度でケーブルの抜き差しをしましたが、特に取れそうな感じはしませんでした。接着剤を盛るだけなので、やっとくのがおすすめです。

{{< figure src="/ox-hugo/self-made-keyboard-pro-micro.jpg" >}}

裏側からダイオードをいれていき、カプトンテープをマスキングテープがわりにして仮どめしました。カプトンテープを使うと、この後にダイオードをはんだ付けしても特に問題なかったので、普通のマスキングテープよりいいかも知れません。

{{< figure src="/ox-hugo/self-made-keyboard-diode-inserted.jpg" >}}

途中の写真がなかったのであれですが、Pro Microとキースイッチまではんだ付けしたところです。コレは左手分ですが、実はこの時右手側で一列分キースイッチをはんだ付けするのを忘れていて、動作確認する時に **？？！！！** ってなってました。

{{< figure src="/ox-hugo/self-made-keyboard-all-solidered.jpg" >}}

プレートを付けてキースイッチを付けるとこんな感じになります。

{{< figure src="/ox-hugo/self-made-keyboard-complete.jpg" >}}

所要時間は、細かく測ってませんがおよそ８時間くらいかかった気がします。最後の３時間位は、後述のトラブルを解決するためにかかった気がしますが・・・。


## 出くわしたトラブル {#出くわしたトラブル}

はんだ付けが不安でしたが、実際やってみると、きちんとやり方を守れば、特に問題なくできました。しかしそれ以外のトラブルが・・・。

-   Pro Microを認識しない
    -   私のメインPCはGentoo Linuxなんですが、カーネルのオプションを絞りすぎていて、Pro Microをリセットした時に作成される `/dev/ttyACM0` が出来ない状態になっていました・・・
    -   足りなかったオプションとモジュールを追加して解決
-   USBをつないで動くときと動かないときがある
    -   マグネット式のUSBケーブルに若干の問題があったらしく、普通の向きと逆さまにしたらうまく動きました
    -   とりあえずは問題ないってことにしてます
-   キーが一列反応しない
    -   そもそもキースイッチがはんだ付けされてなかったという悲劇
    -   ハンタ付したら普通に動きました
-   スタビライザーの装着をミスった
    -   PCB上に配置するはずが、よくわからなくてキースイッチと同じ側から入れてしまい、なんか不安定に・・・
    -   動くことは普通に動くので、まぁいいっか・・・っていうことにしてます

スタビライザーを付けている人が少なく、どうもよくわからなかったのが・・・。次回があればミスをしないようにしたいところです。


## ところでキーマップは？ {#ところでキーマップは}

[こちら](https://github.com/derui/qmk%5Ffirmware/blob/master/keyboards/iris/keymaps/derui/keymap.c) です。

今までのErgodox EZを再現することは当たり前に出来ないので、まだ試行錯誤しています。

特に、蜂蜜小梅配列を実装したキー配列が恐ろしくギリギリなので、ここをなんとかしたいところです。固まったら、改めて書きます。


## 次に向けて {#次に向けて}

Irisを組んでみて、半田付けのコツであったりはなんとなく習得したので、次は [crkbd](https://pskbd.booth.pm/items/869375) にチャレンジしてみたいです。

それと、白軸と間違えて赤軸を使った所、びっくりするくらい重く感じているので、慣れるか別の軸で作るかをさっそくけんとうしています・・・

この記事は100% Irisで書かれました。
